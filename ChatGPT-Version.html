<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Master Life Plan 2025</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
  <style>
    :root {
      --primary: #2563eb;
      --secondary: #0ea5e9;
      --accent: #8b5cf6;
      --success: #10b981;
      --warning: #f59e0b;
      --dark: #0f172a;
      --gray: #64748b;
      --light: #f8fafc;
      --light-gray: #e2e8f0;
      --card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
        0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    body {
      font-family: "Inter", sans-serif;
      background: #f3f4f6;
      color: var(--dark);
    }
    .card {
      background: white;
      border-radius: 1rem;
      box-shadow: var(--card-shadow);
      border: 1px solid rgba(0, 0, 0, 0.05);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .card:hover {
      transform: translateY(-0.5rem);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
        0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    .tab-button {
      padding: 0.75rem 1rem;
      border-bottom: 4px solid transparent;
      transition: 0.2s;
      cursor: pointer;
    }
    .tab-button.active {
      color: var(--primary);
      border-color: var(--primary);
      font-weight: 600;
    }
    .hidden {
      display: none;
    }
    .section-title h2 {
      font-size: 1.875rem;
      color: var(--primary);
      text-align: center;
      margin-bottom: 1rem;
      position: relative;
      display: inline-block;
    }
    .section-title h2::after {
      content: "";
      position: absolute;
      bottom: -0.5rem;
      left: 50%;
      transform: translateX(-50%);
      width: 5rem;
      height: 0.25rem;
      background: var(--accent);
      border-radius: 0.25rem;
    }
    .tag {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      margin: 0.125rem;
    }
    .tag-health { background: #dbeafe; color: var(--primary); }
    .tag-work   { background: #ede9fe; color: var(--accent); }
    .tag-family { background: #f0fdf4; color: var(--success); }
    .tag-learning{ background: #ecfeff; color: #06b6d4; }

    /* Sticky headers */
    .schedule-table thead th {
      position: sticky;
      top: 0;
      background: white;
      z-index: 10;
    }

    /* Mobile card view for schedule */
    .schedule-cards { display: grid; gap: 1rem; }
    @media (min-width: 768px) {
      .schedule-cards { display: none; }
      .schedule-table  { display: table; }
    }
    @media (max-width: 767px) {
      .schedule-table { display: none; }
    }

    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }
    .modal-content {
      background: white;
      padding: 1.5rem;
      border-radius: 1rem;
      max-width: 32rem;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    @media print {
      .no-print { display: none !important; }
      .card { box-shadow: none !important; border: 1px solid #e5e7eb !important; }
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="bg-gradient-to-r from-[var(--primary)] to-[var(--secondary)] text-white p-8 border-b-4 border-[var(--accent)]">
    <div class="text-center space-y-4 max-w-3xl mx-auto">
      <h1 class="text-4xl md:text-5xl font-extrabold">Master Life Plan 2025</h1>
      <p class="text-lg md:text-xl opacity-90">Your Integrated Dashboard for a Year of Growth</p>
      <div class="inline-flex flex-wrap items-center justify-center gap-4 bg-white/20 backdrop-blur-sm px-6 py-3 rounded-xl">
        <span><i class="fas fa-user"></i> Anthony, 44</span>
        <span><i class="fas fa-briefcase"></i> IT Manager</span>
        <span><i class="fas fa-map-marker-alt"></i> Toronto</span>
        <span><i class="fas fa-heartbeat"></i> Sciatica Care</span>
      </div>
    </div>
  </header>

  <!-- TABS -->
  <nav class="sticky top-0 bg-white/80 backdrop-blur-md z-40 no-print" role="tablist" aria-label="Main Sections">
    <div class="flex overflow-x-auto space-x-2 p-2 container mx-auto">
      <button data-tab="dashboard" class="tab-button active" role="tab" aria-selected="true">Dashboard</button>
      <button data-tab="schedule" class="tab-button" role="tab">Schedule</button>
      <button data-tab="nutrition" class="tab-button" role="tab">Nutrition</button>
      <button data-tab="exercise" class="tab-button" role="tab">Exercise</button>
      <button data-tab="wellbeing" class="tab-button" role="tab">Well-Being</button>
      <button data-tab="career" class="tab-button" role="tab">Career</button>
      <button data-tab="family" class="tab-button" role="tab">Family</button>
      <button data-tab="tracking" class="tab-button" role="tab">Tracking</button>
    </div>
  </nav>

  <!-- CONTENT -->
  <main class="container mx-auto py-8 space-y-12">
    <!-- DASHBOARD -->
    <section id="dashboard" role="tabpanel">
      <div class="section-title"><h2>Today's Focus</h2><p id="currentDate" class="text-gray-600 mt-1"></p></div>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Daily Checklist -->
        <div class="card p-6">
          <h3 class="font-bold text-xl mb-4">
            <i class="fas fa-check-square text-[var(--primary)] mr-2"></i>Daily Checklist
          </h3>
          <ul id="daily-checklist" class="space-y-2 text-gray-700" aria-label="Daily tasks"></ul>
        </div>
        <!-- Quote -->
        <div class="card p-6 bg-gradient-to-br from-[var(--primary)] to-[var(--accent)] text-white text-center">
          <h3 class="font-bold text-xl mb-3">
            <i class="fas fa-quote-left mr-2"></i>Quote of the Day
          </h3>
          <p id="motivational-quote" class="italic"></p>
        </div>
        <!-- Hydration -->
        <div class="card p-6">
          <h3 class="font-bold text-xl mb-4">
            <i class="fas fa-tint text-[var(--primary)] mr-2"></i>Hydration & Supplements
          </h3>
          <div class="space-y-4">
            <div>
              <label for="water-tracker" class="block text-sm font-medium">Water Intake (L)</label>
              <div class="flex items-center mt-1">
                <input
                  type="range"
                  id="water-tracker"
                  min="0"
                  max="4"
                  step="0.25"
                  value="0"
                  class="w-full accent-[var(--primary)]"
                  aria-valuemin="0" aria-valuemax="4" aria-valuenow="0"
                />
                <span id="water-level" class="ml-4 font-semibold text-[var(--primary)]">0.00 L</span>
              </div>
            </div>
            <div>
              <p class="font-medium mb-2">Supplements</p>
              <div id="supplement-tracker" class="space-y-2"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SCHEDULE -->
    <section id="schedule" class="hidden" role="tabpanel">
      <div class="section-title"><h2>Weekly Schedule</h2></div>

      <!-- Desktop Table -->
      <div class="card overflow-x-auto p-4">
        <table class="w-full table-auto border-collapse schedule-table">
          <thead class="bg-gray-100">
            <tr>
              <th class="p-2 text-left">Time</th>
              <th class="p-2 text-left">Mon</th>
              <th class="p-2 text-left">Tue</th>
              <th class="p-2 text-left">Wed</th>
              <th class="p-2 text-left">Thu</th>
              <th class="p-2 text-left">Fri</th>
              <th class="p-2 text-left">Sat</th>
              <th class="p-2 text-left">Sun</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200">
            <tr><td class="p-2 font-semibold">5:30–6:00</td><td colspan="7" class="p-2"><span class="tag tag-health">Wake & Hydrate</span></td></tr>
            <tr><td class="p-2 font-semibold">6:00–7:00</td><td colspan="5" class="p-2"><span class="tag tag-health">Bike Commute</span></td><td class="p-2 bg-green-50"><span class="tag tag-health">Pilates/Yoga</span></td><td class="p-2 bg-green-50"><span class="tag tag-family">Family Walk</span></td></tr>
            <tr><td class="p-2 font-semibold">7:00–7:30</td><td colspan="5" class="p-2 bg-blue-50"><span class="tag tag-health">AM Gym Session</span></td><td colspan="2" class="p-2">Prepare Breakfast</td></tr>
            <tr><td class="p-2 font-semibold">7:45–8:15</td><td colspan="5" class="p-2 bg-yellow-50"><span class="tag tag-learning">GCP Study</span></td><td colspan="2" class="p-2">Family Breakfast</td></tr>
            <tr><td class="p-2 font-semibold">8:30–12:00</td><td colspan="5" class="p-2"><span class="tag tag-work">Work Block</span></td><td colspan="2" class="p-2">Meal Prep & Errands</td></tr>
            <tr><td class="p-2 font-semibold">12:15–12:45</td><td colspan="5" class="p-2 bg-yellow-50"><span class="tag tag-learning">GCP Study</span></td><td colspan="2" class="p-2">Lunch</td></tr>
            <tr><td class="p-2 font-semibold">1:00–5:00</td><td colspan="5" class="p-2"><span class="tag tag-work">Work Block</span></td><td colspan="2" class="p-2">Free/Family Time</td></tr>
            <tr><td class="p-2 font-semibold">5:00–6:00</td><td class="p-2 bg-red-50"><span class="tag tag-health">Lift: Upper</span></td><td class="p-2"><span class="tag tag-health">Bike Home</span></td><td class="p-2 bg-red-50"><span class="tag tag-health">Lift: Lower</span></td><td class="p-2"><span class="tag tag-health">Bike Home</span></td><td class="p-2 bg-red-50"><span class="tag tag-health">Lift: Full</span></td><td colspan="2" class="p-2">Prepare Dinner</td></tr>
            <tr><td class="p-2 font-semibold">6:00–7:00</td><td colspan="7" class="p-2"><span class="tag tag-family">Family Dinner</span></td></tr>
            <tr><td class="p-2 font-semibold">7:00–7:30</td><td colspan="7" class="p-2 bg-purple-50"><span class="tag tag-family">Family Activity</span></td></tr>
            <tr><td class="p-2 font-semibold">7:30–8:00</td><td colspan="7" class="p-2 bg-indigo-50"><span class="tag tag-health">Conscious Breathing</span></td></tr>
            <tr><td class="p-2 font-semibold">8:00–8:30</td><td colspan="5" class="p-2 bg-yellow-50"><span class="tag tag-learning">GCP Study</span></td><td colspan="2" class="p-2">Wind-down</td></tr>
            <tr><td class="p-2 font-semibold">9:30 PM</td><td colspan="7" class="p-2"><span class="tag tag-health">Sleep</span></td></tr>
          </tbody>
        </table>
      </div>

      <!-- Mobile Cards -->
      <div class="schedule-cards no-print" aria-label="Schedule cards (mobile)">
        <!-- JS will fill these -->
      </div>
    </section>

    <!-- NUTRITION -->
    <section id="nutrition" class="hidden" role="tabpanel">
      <div class="section-title"><h2>Nutrition</h2></div>
      <div class="card p-6 space-y-4">
        <div>
          <h3 class="font-bold text-xl mb-2">Core Principles</h3>
          <ul class="list-disc list-inside">
            <li>17/7 IF (4×/wk): 12–7 PM</li>
            <li>Low-FODMAP, low-carb, low-sugar, low-salt</li>
            <li>Base meal + family add-ons</li>
          </ul>
        </div>
        <div>
          <h3 class="font-bold text-xl mb-2">Seasonal Shopping</h3>
          <div id="seasonal-shopping-list"></div>
          <button
            id="generate-recipes-btn"
            class="w-full bg-[var(--primary)] text-white py-2 rounded-lg hover:bg-[var(--secondary)] transition flex justify-center items-center gap-2"
          >
            <i class="fas fa-magic"></i> Generate Recipes
          </button>
        </div>
      </div>
    </section>

    <!-- EXERCISE -->
    <section id="exercise" class="hidden" role="tabpanel">
      <div class="section-title"><h2>Exercise</h2></div>
      <div class="card p-6 mb-6">
        <h3 class="font-bold text-xl mb-3">Sciatica-Safe Framework</h3>
        <ul class="list-disc list-inside">
          <li>Warm/cool-down 5–10m</li>
          <li>Stop on nerve pain</li>
          <li>Neutral spine</li>
        </ul>
      </div>
      <div class="grid lg:grid-cols-3 gap-6">
        <div class="card p-6">
          <h4 class="font-semibold mb-2">Upper (Mon)</h4>
          <ul class="list-disc list-inside">
            <li>Dumbbell Press</li>
            <li>Cable Row</li>
            <li>Single-Arm Row</li>
            <li>Overhead Press</li>
            <li>Arms</li>
          </ul>
        </div>
        <div class="card p-6">
          <h4 class="font-semibold mb-2">Lower (Wed)</h4>
          <ul class="list-disc list-inside">
            <li>Goblet Squat</li>
            <li>Lunge</li>
            <li>Leg Press</li>
            <li>Glute Bridge</li>
            <li>Calf Raise</li>
          </ul>
        </div>
        <div class="card p-6">
          <h4 class="font-semibold mb-2">Full (Fri)</h4>
          <ul class="list-disc list-inside">
            <li>Squat</li>
            <li>Push-up</li>
            <li>Lunge</li>
            <li>Row</li>
            <li>Plank</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- WELL-BEING -->
    <section id="wellbeing" class="hidden" role="tabpanel">
      <div class="section-title"><h2>Well-Being</h2></div>
      <div class="grid lg:grid-cols-2 gap-6">
        <div class="card p-6">
          <h3 class="font-bold text-xl mb-3">Breathing & Sleep</h3>
          <p class="mb-3">4-7-8: inhale 4s, hold 7s, exhale 8s ×20m</p>
          <h4 class="font-semibold mb-1">Sleep</h4>
          <ul class="list-disc list-inside">
            <li>No screens after 8:30</li>
            <li>Dark, 18°C</li>
            <li>Consistent times</li>
          </ul>
        </div>
        <div class="card p-6">
          <h3 class="font-bold text-xl mb-3">Supplements</h3>
          <div class="space-y-2">
            <div class="flex justify-between"><span>D3, B12, Ω-3, Cranberry</span><span>Meal 1</span></div>
            <div class="flex justify-between"><span>Mg Citrate</span><span>Bedtime</span></div>
            <div class="flex justify-between"><span>Melatonin</span><span>Bedtime</span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- CAREER -->
    <section id="career" class="hidden" role="tabpanel">
      <div class="section-title"><h2>Career</h2></div>
      <div class="card p-6">
        <h3 class="font-bold text-xl mb-4">GCP Timeline</h3>
        <ul class="list-disc list-inside">
          <li><strong>1–2 mo:</strong> Digital Leader</li>
          <li><strong>3–6 mo:</strong> Associate Engineer</li>
          <li><strong>7–12 mo:</strong> Cloud Architect</li>
        </ul>
      </div>
    </section>

    <!-- FAMILY -->
    <section id="family" class="hidden" role="tabpanel">
      <div class="section-title"><h2>Family</h2></div>
      <div class="card p-6">
        <h3 class="font-bold text-xl mb-3">After Dinner</h3>
        <ul class="list-disc list-inside">
          <li>Family walk</li>
          <li>Games</li>
          <li>Mini yoga</li>
          <li>Reading</li>
        </ul>
      </div>
    </section>

    <!-- TRACKING -->
    <section id="tracking" class="hidden" role="tabpanel">
      <div class="section-title"><h2>Tracking</h2></div>
      <div class="space-y-6">
        <div class="card p-6">
          <h3 class="font-bold text-xl mb-3">Weekly Reflection</h3>
          <textarea
            id="weekly-reflection-input"
            class="w-full border rounded p-2 mb-3"
            rows="4"
            placeholder="What went well? Challenges?"
          ></textarea>
          <button
            id="get-feedback-btn"
            class="bg-[var(--success)] text-white px-4 py-2 rounded hover:opacity-90 transition"
          >
            Get AI Feedback
          </button>
        </div>
        <div class="card p-6">
          <h3 class="font-bold text-xl mb-3">Calendar Export</h3>
          <button
            id="download-ics"
            class="bg-[var(--primary)] text-white px-4 py-2 rounded hover:bg-[var(--secondary)] transition"
          >
            <i class="fas fa-calendar-alt mr-2"></i> Download .ics
          </button>
        </div>
      </div>
    </section>
  </main>

  <!-- PRINT -->
  <button
    onclick="window.print()"
    class="no-print fixed bottom-6 right-6 bg-[var(--primary)] text-white p-4 rounded-full shadow-lg hover:bg-[var(--secondary)] transition"
    aria-label="Print plan"
  >
    <i class="fas fa-print"></i>
  </button>

  <!-- MODAL -->
  <div id="modal" class="modal-overlay hidden no-print" role="dialog" aria-modal="true">
    <div class="modal-content">
      <div class="flex justify-between items-center mb-4">
        <h3 id="modal-title" class="text-2xl font-bold"></h3>
        <button onclick="closeModal()" class="text-2xl" aria-label="Close">&times;</button>
      </div>
      <div id="modal-body" class="prose"></div>
    </div>
  </div>

  <script>
    const scheduleData = [
      { time:"5:30–6:00", mon:"Wake & Hydrate", tue:"Wake & Hydrate", wed:"Wake & Hydrate", thu:"Wake & Hydrate", fri:"Wake & Hydrate", sat:"Pilates/Yoga", sun:"Family Walk" },
      { time:"6:00–7:00", mon:"Bike Commute", tue:"Bike Commute", wed:"Bike Commute", thu:"Bike Commute", fri:"Bike Commute", sat:"Pilates/Yoga", sun:"Family Walk" },
      { time:"7:00–7:30", mon:"AM Gym", tue:"AM Gym", wed:"AM Gym", thu:"AM Gym", fri:"AM Gym", sat:"Prep Breakfast", sun:"Prep Breakfast" },
      { time:"7:45–8:15", mon:"GCP Study", tue:"GCP Study", wed:"GCP Study", thu:"GCP Study", fri:"GCP Study", sat:"Family Breakfast", sun:"Family Breakfast" },
      { time:"8:30–12:00", mon:"Work Block", tue:"Work Block", wed:"Work Block", thu:"Work Block", fri:"Work Block", sat:"Meal Prep", sun:"Meal Prep" },
      { time:"12:15–12:45",mon:"GCP Study",tue:"GCP Study",wed:"GCP Study",thu:"GCP Study",fri:"GCP Study",sat:"Lunch",sun:"Lunch" },
      { time:"1:00–5:00", mon:"Work Block", tue:"Work Block", wed:"Work Block", thu:"Work Block", fri:"Work Block", sat:"Free Time", sun:"Free Time" },
      { time:"5:00–6:00", mon:"Lift: Upper", tue:"Bike Home", wed:"Lift: Lower", thu:"Bike Home", fri:"Lift: Full", sat:"Prep Dinner", sun:"Prep Dinner" },
      { time:"6:00–7:00", mon:"Family Dinner",tue:"Family Dinner",wed:"Family Dinner",thu:"Family Dinner",fri:"Family Dinner",sat:"Family Dinner",sun:"Family Dinner" },
      { time:"7:00–7:30", mon:"Family Activity",tue:"Family Activity",wed:"Family Activity",thu:"Family Activity",fri:"Family Activity",sat:"Family Activity",sun:"Family Activity" },
      { time:"7:30–8:00", mon:"Breathing",tue:"Breathing",wed:"Breathing",thu:"Breathing",fri:"Breathing",sat:"Breathing",sun:"Breathing" },
      { time:"8:00–8:30", mon:"GCP Study",tue:"GCP Study",wed:"GCP Study",thu:"GCP Study",fri:"GCP Study",sat:"Wind-down",sun:"Wind-down" },
      { time:"9:30 PM", mon:"Sleep",tue:"Sleep",wed:"Sleep",thu:"Sleep",fri:"Sleep",sat:"Sleep",sun:"Sleep" }
    ];

    const tasks = [
      "5:30 AM Wake-up",
      "AM Gym",
      "3.5 L+ Water",
      "20 m Breathing",
      "9:30 PM Sleep",
      "Family Time",
      "GCP Study"
    ];

    const supplements = ["Vitamin D","B12","Omega-3","Cranberry","Magnesium"];

    const seasonal = {
      Winter:{produce:"Apples,Pears,Carrots,Squash",protein:"Chicken,Cod,Eggs",pantry:"Quinoa,Rice,Oats,Nuts"},
      Spring:{produce:"Asparagus,Spinach,Berries",protein:"Chicken,Salmon,Eggs",pantry:"Quinoa,Rice,Nuts"},
      Summer:{produce:"Berries,Peppers,Tomatoes,Zucchini",protein:"Chicken,Fish,Eggs",pantry:"Quinoa,Rice,Nuts"},
      Fall:{produce:"Apples,Pears,Pumpkins",protein:"Turkey,Salmon,Eggs",pantry:"Quinoa,Rice,Nuts"}
    };

    // Tab switching:
    document.querySelector("nav").addEventListener("click", e => {
      const btn = e.target.closest("[data-tab]");
      if (!btn) return;
      document.querySelectorAll(".tab-button").forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      document.querySelectorAll("main section").forEach(sec=>{
        sec.id===btn.dataset.tab 
          ? sec.classList.remove("hidden") 
          : sec.classList.add("hidden");
      });
    });

    function showModal(title, html){
      document.getElementById("modal-title").textContent=title;
      document.getElementById("modal-body").innerHTML=html;
      document.getElementById("modal").classList.remove("hidden");
    }
    function closeModal(){
      document.getElementById("modal").classList.add("hidden");
    }

    document.addEventListener("DOMContentLoaded",()=>{
      // Date
      const d=new Date();
      document.getElementById("currentDate").textContent=d.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});

      // Checklist
      const ul=document.getElementById("daily-checklist");
      tasks.forEach(t=>ul.innerHTML+=`<li class="flex items-center"><input type="checkbox" class="mr-2 accent-[var(--primary)]"/><span>${t}</span></li>`);

      // Supplements
      const supDiv=document.getElementById("supplement-tracker");
      supplements.forEach(s=>supDiv.innerHTML+=`<div class="flex justify-between"><span>${s}</span><input type="checkbox" class="accent-[var(--primary)]"/></div>`);

      // Water
      const slider=document.getElementById("water-tracker");
      slider.addEventListener("input",e=>{
        slider.setAttribute("aria-valuenow",e.target.value);
        document.getElementById("water-level").textContent=parseFloat(e.target.value).toFixed(2)+" L";
      });

      // Quote
      const quotes=[
        "Discipline is the bridge between goals and accomplishment.",
        "Small steps lead to big change.",
        "Consistency beats intensity over time."
      ];
      document.getElementById("motivational-quote").textContent=`"${quotes[Math.floor(Math.random()*quotes.length)]}"`;

      // Seasonal
      const m=d.getMonth(),season=m>=2&&m<=4?"Spring":m>=5&&m<=7?"Summer":m<=10?"Fall":"Winter";
      const shop=seasonal[season];
      document.getElementById("seasonal-shopping-list").innerHTML=
        `<strong>${season}:</strong><br/>Produce: ${shop.produce}<br/>Protein: ${shop.protein}<br/>Pantry: ${shop.pantry}`;

      // Recipes button
      document.getElementById("generate-recipes-btn").addEventListener("click",()=>{
        const prompt=`Recipes from ${shop.produce}/${shop.protein}/${shop.pantry}.`;
        callGemini(prompt);
      });

      // Reflection
      document.getElementById("get-feedback-btn").addEventListener("click",()=>{
        const txt=document.getElementById("weekly-reflection-input").value.trim();
        if(!txt) return showModal("Error","<p>Please enter reflection.</p>");
        callGemini(`Reflection: ${txt}. Encourage + suggest.`);
      });

      // ICS
      document.getElementById("download-ics").addEventListener("click",()=>{
        const cal=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//MasterLifePlan//EN","END:VCALENDAR"].join("\n");
        const blob=new Blob([cal],{type:"text/calendar"}),a=document.createElement("a");
        a.href=URL.createObjectURL(blob);a.download="Master_Life_Plan.ics";a.click();
      });

      // Populate mobile schedule cards
      const cardsContainer=document.querySelector(".schedule-cards");
      scheduleData.forEach(r=>{
        const card=document.createElement("div");
        card.className="card p-4";
        card.innerHTML=`
          <h4 class="font-semibold mb-2">${r.time}</h4>
          <ul class="list-disc list-inside">
            <li><strong>Mon:</strong> ${r.mon}</li>
            <li><strong>Tue:</strong> ${r.tue}</li>
            <li><strong>Wed:</strong> ${r.wed}</li>
            <li><strong>Thu:</strong> ${r.thu}</li>
            <li><strong>Fri:</strong> ${r.fri}</li>
            <li><strong>Sat:</strong> ${r.sat}</li>
            <li><strong>Sun:</strong> ${r.sun}</li>
          </ul>`;
        cardsContainer.append(card);
      });
    });

    async function callGemini(prompt){
      try {
        const res=await fetch(
          `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDt8C5DDP9PQO1v7KijZ4MhMFMFpquFBmg`,
          {method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:prompt}]}]})}
        );
        if(!res.ok) throw new Error(res.statusText);
        const j=await res.json();
        const txt=j.candidates?.[0]?.content?.parts?.[0]?.text||"";
        showModal("AI Response",txt.replace(/\n/g,"<br>"));
      } catch(e){
        showModal("Error",`<p>${e.message}</p>`);
      }
    }
  </script>
</body>
</html>
  <!-- Site Navigation Menu -->
  <nav class="bg-white/90 shadow-md py-3 px-4 flex justify-center gap-6 no-print" style="position:sticky;top:0;z-index:150;">
    <a href="Mixed-Gemini-DeepSeek.html" class="font-semibold text-[var(--primary)] hover:text-[var(--accent)] transition">Gemini+DeepSeek (Dashboard)</a>
    <a href="ChatGPT-Version.html" class="font-semibold text-[var(--primary)] hover:text-[var(--accent)] transition">ChatGPT Version</a>
    <a href="DeepSeek-Versio.html" class="font-semibold text-[var(--primary)] hover:text-[var(--accent)] transition">DeepSeek Version</a>
    <a href="Google-version-Home.html" class="font-semibold text-[var(--primary)] hover:text-[var(--accent)] transition">Google Version</a>
    <a href="ChatGPT+Gemini+DeepSeek.html" class="font-semibold text-[var(--primary)] hover:text-[var(--accent)] transition">ChatGPT+Gemini+DeepSeek</a>
  </nav>
