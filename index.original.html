<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Master Life Plan 2025 - A comprehensive planning dashboard for health, career, and family success">
    <meta name="theme-color" content="#2563eb">
    
    <!-- Accessibility Meta Tags -->
    <meta name="application-name" content="Master Life Plan">
    <meta name="apple-mobile-web-app-title" content="Master Life Plan">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    
    <title>Master Life Plan 2025 | 44-Year-Old Professional</title>
    
    <!-- Preload critical assets -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
    
    <!-- Base Accessibility Styles -->
    <style>
        :root {
            /* Color variables with proper contrast ratios */
            --primary: #2563eb;
            --primary-light: #60a5fa;
            --primary-dark: #1e40af;
            --secondary: #0ea5e9;
            --accent: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --light: #f8fafc;
            --dark: #0f172a;
            --gray: #64748b;
            --light-gray: #e2e8f0;
            
            /* Focus state styles */
            --focus-ring-color: #3b82f6;
            --focus-ring-width: 0.25rem;
            
            /* Spacing and sizing */
            --spacing-unit: 0.25rem;
            --container-max-width: 75rem;
            --header-height: 4rem;
            
            /* Font sizes using relative units */
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            
            /* Animation timings */
            --transition-fast: 150ms;
            --transition-normal: 300ms;
            --transition-slow: 500ms;
        }

        /* Base focus styles */
        *:focus-visible {
            outline: var(--focus-ring-width) solid var(--focus-ring-color);
            outline-offset: 0.125rem;
        }

        /* Skip to main content link */
        .skip-to-main {
            position: fixed;
            top: -100%;
            left: 0;
            z-index: 1000;
            padding: 1rem;
            background: var(--primary);
            color: white;
            text-decoration: none;
            transition: top var(--transition-normal);
        }

        .skip-to-main:focus {
            top: 0;
        }

        /* Base responsive typography */
        html {
            font-size: 16px;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            html {
                font-size: 14px;
            }
        }

        /* High contrast mode support */
        @media (forced-colors: active) {
            * {
                border-color: currentColor;
            }
        }
    </style>
    
    <!-- Core Styles -->
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #0ea5e9;
            --accent: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --light: #f8fafc;
            --dark: #0f172a;
            --gray: #64748b;
            --light-gray: #e2e8f0;
            --card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f7ff 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding-bottom: 60px;
        }
        
        h1, h2, h3, h4, h5 {
            font-weight: 700;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2rem 0;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
            border-bottom: 5px solid var(--accent);
        }
        
        .header-content {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 0 20px;
        }
        
        .header-content h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .header-content p {
            max-width: 700px;
            margin: 0 auto;
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .profile-summary {
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 15px;
            margin: 25px auto 0;
            max-width: 600px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            backdrop-filter: blur(5px);
        }
        
        .profile-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 30px;
        }
        
        .profile-item i {
            font-size: 1.2rem;
        }
        
        nav {
            background-color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-container {
            display: flex;
            justify-content: center;
            padding: 0;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            overflow-x: auto;
            padding: 0 10px;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .nav-links::-webkit-scrollbar {
            display: none;
        }
        
        .nav-links li {
            padding: 15px 0;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            padding: 15px 20px;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-size: 0.95rem;
        }
        
        .nav-links a:hover, 
        .nav-links a.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .section {
            padding: 3.5rem 0;
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .section-header h2 {
            font-size: 2rem;
            color: var(--primary);
            position: relative;
            display: inline-block;
            margin-bottom: 1rem;
        }
        
        .section-header h2::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--accent);
            border-radius: 2px;
        }
        
        .section-header p {
            max-width: 700px;
            margin: 1rem auto 0;
            color: var(--gray);
        }
        
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .card:hover {
            transform: translateY(-7px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .card-header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .card-body {
            padding: 25px;
        }
        
        .schedule-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .schedule-table th {
            background-color: var(--light-gray);
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .schedule-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .schedule-table tr:last-child td {
            border-bottom: none;
        }
        
        .schedule-table .time {
            font-weight: 600;
            color: var(--primary);
            white-space: nowrap;
        }
        
        .schedule-table .activity {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .schedule-table .activity i {
            color: var(--accent);
        }
        
        .tag {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 5px;
        }
        
        .tag-health { background-color: #dbeafe; color: var(--primary); }
        .tag-work { background-color: #ede9fe; color: var(--accent); }
        .tag-family { background-color: #f0fdf4; color: var(--success); }
        .tag-learning { background-color: #ecfeff; color: #06b6d4; }
        
        .meal-plan {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .meal-card {
            background-color: var(--light);
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid var(--success);
            box-shadow: 0 3px 5px rgba(0,0,0,0.05);
        }
        
        .meal-title {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .meal-title h4 {
            color: var(--success);
        }
        
        .meal-title .time {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .shopping-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .shopping-category h4 {
            margin-bottom: 10px;
            color: var(--primary);
            padding-bottom: 5px;
            border-bottom: 2px solid var(--light-gray);
        }
        
        .shopping-category ul {
            list-style: none;
        }
        
        .shopping-category li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .shopping-category li::before {
            content: "•";
            color: var(--accent);
            font-weight: bold;
        }
        
        .progress-container {
            margin: 20px 0;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .progress-bar {
            height: 10px;
            background-color: var(--light-gray);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 5px;
        }
        
        .supplement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .supplement-card {
            background-color: var(--light);
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid var(--warning);
            box-shadow: 0 3px 5px rgba(0,0,0,0.05);
        }
        
        .supplement-name {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }
        
        .supplement-name h4 {
            color: var(--warning);
        }
        
        .checklist {
            list-style: none;
        }
        
        .checklist li {
            padding: 12px 0;
            border-bottom: 1px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .checklist li:last-child {
            border-bottom: none;
        }
        
        .checklist input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--success);
            flex-shrink: 0;
        }
        
        .checklist label {
            flex-grow: 1;
        }
        
        .cta-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 14px 30px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.3);
            gap: 8px;
        }
        
        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(37, 99, 235, 0.4);
        }
        
        .action-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 25px 0;
            background-color: white;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.08);
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 10;
        }
        
        .timeline {
            position: relative;
            padding: 20px 0;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 20px;
            width: 4px;
            background: var(--light-gray);
            border-radius: 2px;
        }
        
        .timeline-item {
            position: relative;
            padding-left: 50px;
            margin-bottom: 30px;
        }
        
        .timeline-item:last-child {
            margin-bottom: 0;
        }
        
        .timeline-dot {
            position: absolute;
            left: 12px;
            top: 0;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            z-index: 1;
        }
        
        .timeline-content {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .timeline-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
        }
        
        .family-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .family-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            border-top: 4px solid var(--success);
            text-align: center;
        }
        
        .family-card i {
            font-size: 2.5rem;
            color: var(--success);
            margin-bottom: 15px;
        }
        
        .tracking-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .tracking-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .tracking-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }
        
        .tracking-card-header i {
            font-size: 1.8rem;
            color: var(--accent);
        }
        
        .tracking-card-header h3 {
            color: var(--dark);
        }
        
        .calendar-preview {
            background: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
        }
        
        .calendar-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .calendar-nav-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.25rem;
            color: var(--primary);
            transition: all var(--transition-normal);
        }

        .calendar-nav-btn:hover {
            background-color: var(--light-gray);
        }

        .calendar-nav-btn:focus-visible {
            outline: var(--focus-ring-width) solid var(--focus-ring-color);
            outline-offset: 0.125rem;
        }

        .current-month {
            font-size: var(--text-lg);
            font-weight: 600;
            color: var(--dark);
        }

        .calendar-grid {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            font-weight: 600;
            color: var(--gray);
            font-size: var(--text-sm);
        }

        .calendar-dates {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.25rem;
        }

        .calendar-date {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 0.25rem;
            font-size: var(--text-sm);
            transition: all var(--transition-normal);
        }

        .calendar-date:hover {
            background-color: var(--light-gray);
        }

        .calendar-date.active {
            background-color: var(--primary);
            color: white;
        }

        .calendar-date.today {
            border: 0.125rem solid var(--primary);
        }

        .calendar-date.other-month {
            color: var(--gray);
            opacity: 0.5;
        }
        
        .quote-container {
            background: linear-gradient(135deg, #f0f7ff, #e6f7ff);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-top: 30px;
            border-left: 5px solid var(--accent);
        }
        
        .quote {
            font-style: italic;
            font-size: 1.2rem;
            color: var(--dark);
            margin-bottom: 15px;
        }
        
        .author {
            font-weight: 600;
            color: var(--primary);
        }
        
        @media (max-width: 768px) {
            .header-content h1 {
                font-size: 2rem;
            }
            
            .section {
                padding: 2.5rem 0;
            }
            
            .nav-links {
                justify-content: flex-start;
            }
            
            .action-bar {
                flex-direction: column;
                align-items: center;
                gap: 10px;
                padding: 15px 0;
            }
            
            .cta-button {
                width: 90%;
            }
            
            .profile-summary {
                gap: 10px;
                padding: 12px;
            }
            
            .profile-item {
                padding: 6px 12px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Skip to main content link -->
    <a href="#main-content" class="skip-to-main">Skip to main content</a>

    <!-- Site Navigation Menu -->
    <nav class="main-nav" role="navigation" aria-label="Main navigation">
        <div class="container nav-container">
            <button class="hamburger-menu" 
                    aria-label="Toggle navigation menu" 
                    aria-expanded="false"
                    aria-controls="primary-navigation">
                <span class="hamburger-line" aria-hidden="true"></span>
                <span class="hamburger-line" aria-hidden="true"></span>
                <span class="hamburger-line" aria-hidden="true"></span>
            </button>
            
            <div class="nav-links-container" id="primary-navigation">
                <a href="Mixed-Gemini-DeepSeek.html" class="nav-link" aria-current="page">
                    <span class="nav-text">Gemini+DeepSeek</span>
                    <span class="nav-description">Dashboard</span>
                </a>
                <a href="ChatGPT-Version.html" class="nav-link">
                    <span class="nav-text">ChatGPT Version</span>
                </a>
                <a href="DeepSeek-Versio.html" class="nav-link active" aria-current="page">
                    <span class="nav-text">DeepSeek Version</span>
                </a>
                <a href="Google-version-Home.html" class="nav-link">
                    <span class="nav-text">Google Version</span>
                </a>
                <a href="ChatGPT+Gemini+DeepSeek.html" class="nav-link">
                    <span class="nav-text">ChatGPT+Gemini+DeepSeek</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Core Styles -->
    <style>
        /* Core Layout & Navigation */
        .main-nav {
            background: white;
            box-shadow: var(--card-shadow);
            position: sticky;
            top: 0;
            z-index: 150;
            padding: var(--spacing-unit) 0;
            min-height: var(--header-height);
            display: flex;
            align-items: center;
        }

        .nav-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            max-width: var(--container-max-width);
            margin: 0 auto;
            padding: 0 var(--spacing-unit);
        }

        /* Hamburger Menu Component */
        .hamburger-menu {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 3rem;
            height: 2.25rem;
            background: transparent;
            border: 0.125rem solid transparent;
            cursor: pointer;
            padding: 0.5rem;
            position: absolute;
            left: var(--spacing-unit);
            z-index: 10;
            transition: all var(--transition-normal);
            border-radius: 0.375rem;
        }

        .hamburger-menu:hover {
            background-color: var(--light-gray);
        }

        .hamburger-menu:focus-visible {
            border-color: var(--focus-ring-color);
            outline: none;
        }

        [aria-expanded="true"] {
            background-color: var(--light-gray);
        }

        .hamburger-line {
            width: 100%;
            height: 0.1875rem;
            background-color: var(--primary);
            border-radius: 0.1875rem;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        /* Navigation Links */
        .nav-links-container {
            display: flex;
            justify-content: center;
            gap: clamp(1rem, 2vw, 2rem);
            flex-wrap: wrap;
            transition: all var(--transition-normal);
        }

        .nav-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            font-size: var(--text-base);
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            transition: all var(--transition-normal);
            position: relative;
            min-width: 7rem;
            text-align: center;
        }

        .nav-text {
            position: relative;
            z-index: 1;
        }

        .nav-description {
            font-size: var(--text-xs);
            color: var(--gray);
            margin-top: 0.25rem;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0.1875rem;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 0.125rem;
            transform: scaleX(0);
            transition: transform var(--transition-normal);
            transform-origin: center;
        }

        /* Improve touch targets on mobile */
        @media (hover: none) {
            .nav-link {
                padding: 1rem;
            }
        }

        /* High contrast mode support */
        @media (forced-colors: active) {
            .nav-link::after {
                background: ButtonText;
            }
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .nav-link:hover::after {
            transform: scaleX(1);
        }

        .nav-link.active {
            color: var(--primary);
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(14, 165, 233, 0.1));
        }

        .nav-link.active::after {
            transform: scaleX(1);
        }

        /* Responsive Design */
        @media (hover: hover) {
            .nav-link:hover {
                transform: translateY(-2px);
            }
        }

        @media (max-width: 768px) {
            /* Navigation */
            .hamburger-menu {
                display: flex;
            }

            .nav-links-container {
                position: fixed;
                top: 0;
                left: 0;
                width: min(80vw, 20rem);
                height: 100vh;
                background: white;
                flex-direction: column;
                padding: clamp(2rem, 5vh, 5rem) 1.5rem 2rem;
                gap: 1.5rem;
                box-shadow: 0 0 1rem rgba(0, 0, 0, 0.1);
                transform: translateX(-100%);
                transition: transform var(--transition-normal) cubic-bezier(0.4, 0, 0.2, 1);
                z-index: 5;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }

            .nav-links-container.active {
                transform: translateX(0);
            }

            .nav-link {
                font-size: var(--text-lg);
                padding: 1rem;
                width: 100%;
                text-align: left;
                flex-direction: row;
                align-items: center;
                gap: 0.75rem;
                border-radius: 0.5rem;
            }

            .nav-description {
                margin-top: 0;
                margin-left: auto;
                color: var(--gray);
            }

            /* Improved touch feedback */
            .nav-link:active {
                background-color: var(--light-gray);
                transform: scale(0.98);
            }

            /* Focus visible improvements */
            .nav-link:focus-visible {
                outline: 0.25rem solid var(--focus-ring-color);
                outline-offset: -0.25rem;
            }

            /* Enhanced Hamburger Animation */
            .hamburger-menu.active {
                transform: rotate(180deg);
            }

            .hamburger-menu.active span:first-child {
                transform: translateY(0.5rem) rotate(45deg);
            }

            .hamburger-menu.active span:nth-child(2) {
                opacity: 0;
                transform: scaleX(0);
            }

            .hamburger-menu.active span:last-child {
                transform: translateY(-0.5rem) rotate(-45deg);
            }
        }
    </style>

    <!-- Hamburger Menu JavaScript -->
    <script>
        /**
         * Navigation Manager - Handles mobile navigation functionality
         */
        class NavigationManager {
            constructor() {
                this.hamburger = document.querySelector('.hamburger-menu');
                this.navContainer = document.querySelector('.nav-links-container');
                this.overlay = this.createOverlay();
                this.isMenuOpen = false;

                this.init();
            }

            createOverlay() {
                const overlay = document.createElement('div');
                overlay.classList.add('nav-overlay');
                document.body.appendChild(overlay);
                return overlay;
            }

            toggleMenu = () => {
                this.isMenuOpen = !this.isMenuOpen;
                this.hamburger.classList.toggle('active', this.isMenuOpen);
                this.navContainer.classList.toggle('active', this.isMenuOpen);
                this.overlay.classList.toggle('active', this.isMenuOpen);
                document.body.style.overflow = this.isMenuOpen ? 'hidden' : '';
            }

            handleEscapeKey = (event) => {
                if (event.key === 'Escape' && this.isMenuOpen) {
                    this.toggleMenu();
                }
            }

            init() {
                // Event listeners
                this.hamburger.addEventListener('click', this.toggleMenu);
                this.overlay.addEventListener('click', this.toggleMenu);
                document.addEventListener('keydown', this.handleEscapeKey);

                // Close menu when clicking links
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', () => {
                        if (this.isMenuOpen) this.toggleMenu();
                    });
                });

                // Add resize handler with debounce
                let resizeTimer;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimer);
                    resizeTimer = setTimeout(() => {
                        if (window.innerWidth > 768 && this.isMenuOpen) {
                            this.toggleMenu();
                        }
                    }, 250);
                });
            }
        }

        // Initialize navigation when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            new NavigationManager();
        });
    </script>
    <header>
        <div class="header-content">
            <h1>Master Life Plan 2025</h1>
            <p>Comprehensive blueprint for health, career, and family success at age 44</p>
            
            <div class="profile-summary">
                <div class="profile-item">
                    <i class="fas fa-user"></i>
                    <span>44yo Male | IT Manager</span>
                </div>
                <div class="profile-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Toronto, Canada</span>
                </div>
                <div class="profile-item">
                    <i class="fas fa-heartbeat"></i>
                    <span>Sciatica Management</span>
                </div>
                <div class="profile-item">
                    <i class="fas fa-bullseye"></i>
                    <span>Goal: Google IT Manager</span>
                </div>
            </div>
        </div>
    </header>
    
    <nav>
        <div class="container">
            <ul class="nav-links">
                <li><a href="#daily-routine" class="active">Daily</a></li>
                <li><a href="#nutrition">Nutrition</a></li>
                <li><a href="#exercise">Exercise</a></li>
                <li><a href="#recovery">Recovery</a></li>
                <li><a href="#career">Career</a></li>
                <li><a href="#family">Family</a></li>
                <li><a href="#tracking">Tracking</a></li>
            </ul>
        </div>
    </nav>
    
    <main class="container">
        <!-- Daily Routine Section -->
        <section id="daily-routine" class="section">
            <div class="section-header">
                <h2>Daily Routine</h2>
                <p>Structured schedule for optimal productivity and health</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-calendar-day"></i> Ideal Daily Schedule
                </div>
                <div class="card-body">
                    <table class="schedule-table">
                        <tr>
                            <th>Time</th>
                            <th>Activity</th>
                            <th>Tags</th>
                        </tr>
                        <tr>
                            <td class="time">5:30 AM</td>
                            <td class="activity"><i class="fas fa-sun"></i> Wake Up</td>
                            <td><span class="tag tag-health">Health</span></td>
                        </tr>
                        <tr>
                            <td class="time">6:00 AM</td>
                            <td class="activity"><i class="fas fa-bicycle"></i> Bike Commute (Marlee Ave → Richmond St)</td>
                            <td><span class="tag tag-health">Health</span> <span class="tag tag-work">Work</span></td>
                        </tr>
                        <tr>
                            <td class="time">7:00 AM</td>
                            <td class="activity"><i class="fas fa-dumbbell"></i> Gym: Elliptical, Core, Sciatica-safe stretches</td>
                            <td><span class="tag tag-health">Health</span></td>
                        </tr>
                        <tr>
                            <td class="time">7:45 AM</td>
                            <td class="activity"><i class="fas fa-laptop-code"></i> GCP Study Block</td>
                            <td><span class="tag tag-learning">Learning</span></td>
                        </tr>
                        <tr>
                            <td class="time">8:30 AM</td>
                            <td class="activity"><i class="fas fa-briefcase"></i> Work (Standing Desk)</td>
                            <td><span class="tag tag-work">Work</span></td>
                        </tr>
                        <tr>
                            <td class="time">12:15 PM</td>
                            <td class="activity"><i class="fas fa-laptop-code"></i> GCP Study Block</td>
                            <td><span class="tag tag-learning">Learning</span></td>
                        </tr>
                        <tr>
                            <td class="time">12:45 PM</td>
                            <td class="activity"><i class="fas fa-utensils"></i> Meal 1 (Within 17/7 Fast)</td>
                            <td><span class="tag tag-health">Health</span></td>
                        </tr>
                        <tr>
                            <td class="time">5:00 PM</td>
                            <td class="activity"><i class="fas fa-bicycle"></i> Bike Commute Home</td>
                            <td><span class="tag tag-health">Health</span> <span class="tag tag-work">Work</span></td>
                        </tr>
                        <tr>
                            <td class="time">6:00 PM</td>
                            <td class="activity"><i class="fas fa-utensils"></i> Family Dinner</td>
                            <td><span class="tag tag-family">Family</span> <span class="tag tag-health">Health</span></td>
                        </tr>
                        <tr>
                            <td class="time">7:00 PM</td>
                            <td class="activity"><i class="fas fa-gamepad"></i> Family Activity</td>
                            <td><span class="tag tag-family">Family</span></td>
                        </tr>
                        <tr>
                            <td class="time">7:30 PM</td>
                            <td class="activity"><i class="fas fa-wind"></i> Conscious Breathing (20 min)</td>
                            <td><span class="tag tag-health">Health</span></td>
                        </tr>
                        <tr>
                            <td class="time">8:00 PM</td>
                            <td class="activity"><i class="fas fa-laptop-code"></i> GCP Review / Mock Interviews</td>
                            <td><span class="tag tag-learning">Learning</span></td>
                        </tr>
                        <tr>
                            <td class="time">9:00 PM</td>
                            <td class="activity"><i class="fas fa-moon"></i> Wind-Down Routine</td>
                            <td><span class="tag tag-health">Health</span></td>
                        </tr>
                        <tr>
                            <td class="time">9:30 PM</td>
                            <td class="activity"><i class="fas fa-bed"></i> Sleep</td>
                            <td><span class="tag tag-health">Health</span></td>
                        </tr>
                    </table>
                </div>
            </div>
        </section>
        
        <!-- Nutrition Section -->
        <section id="nutrition" class="section">
            <div class="section-header">
                <h2>Nutrition & Meal Planning</h2>
                <p>Low-carb, low-FODMAP diet with family adjustments</p>
            </div>
            
            <div class="card-grid">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-apple-alt"></i> Daily Meal Plan
                        <button onclick="generateMealPlan()" class="cta-button" style="padding: 8px 16px; margin-left: 15px; font-size: 0.9rem;">
                            <i class="fas fa-sync-alt"></i> Generate New Meal Plan
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="meal-plan">
                            <div class="meal-card">
                                <div class="meal-title">
                                    <h4>Meal 1 (12:45 PM)</h4>
                                    <div class="time">Within 17/7 Fast</div>
                                </div>
                                <p>Baked salmon + quinoa + steamed carrots/zucchini</p>
                            </div>
                            

                            <div class="meal-card">
                                <div class="meal-title">
                                    <h4>Meal 2 (6:00 PM)</h4>
                                    <div class="time">Family Dinner</div>
                                </div>
                                <p>Turkey meatballs (low-tomato sauce) + gluten-free pasta + spinach salad</p>
                            </div>
                            

                            <div class="meal-card">
                                <div class="meal-title">
                                    <h4>Optional Snack</h4>
                                    <div class="time">As needed</div>
                                </div>
                                <p>Lactose-free yogurt + 10 almonds</p>
                            </div>
                        </div>
                        
                        <h4 style="margin-top: 20px;">Family Adjustments</h4>
                        <ul class="checklist">
                            <li><i class="fas fa-female" style="color: #ec4899;"></i> Wife: Iron-rich spinach + B12 supplements; cholesterol-friendly oats</li>
                            <li><i class="fas fa-child" style="color: #8b5cf6;"></i> Kids: "Deconstructed" meals (separate components), hidden veggie sauces</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-shopping-cart"></i> Biweekly Shopping List
                    </div>
                    <div class="card-body">
                        <div class="shopping-list">
                            <div class="shopping-category">
                                <h4>Produce</h4>
                                <ul>
                                    <li>Spinach (4 bunches)</li>
                                    <li>Zucchini (8)</li>
                                    <li>Carrots (2kg)</li>
                                    <li>Broccoli (4 heads)</li>
                                    <li>Cucumbers (6)</li>
                                </ul>
                            </div>
                            

                            <div class="shopping-category">
                                <h4>Proteins</h4>
                                <ul>
                                    <li>Salmon (6 fillets)</li>
                                    <li>Ground turkey (2kg)</li>
                                    <li>Eggs (24)</li>
                                    <li>Chicken breast (2kg)</li>
                                </ul>
                            </div>
                            

                            <div class="shopping-category">
                                <h4>Pantry</h4>
                                <ul>
                                    <li>Quinoa (1kg)</li>
                                    <li>Low-FODMAP pasta (4pk)</li>
                                    <li>Olive oil (1L)</li>
                                    <li>Almonds (500g)</li>
                                    <li>Lactose-free yogurt (8 cups)</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; background-color: #f0fdf4; padding: 15px; border-radius: 10px;">
                            <h4><i class="fas fa-tint"></i> Hydration Goal</h4>
                            <p>3.5-4 liters of water daily</p>
                            <div class="progress-container">
                                <div class="progress-header">
                                    <span>Today's Progress</span>
                                    <span>2.5L / 4L</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 62.5%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Exercise Section -->
        <section id="exercise" class="section">
            <div class="section-header">
                <h2>Exercise & Sciatica Management</h2>
                <p>Safe workouts with modifications for chronic pain</p>
            </div>
            
            <div class="card-grid">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-dumbbell"></i> Weekly Workout Plan
                        <button onclick="generateWorkout()" class="cta-button" style="padding: 8px 16px; margin-left: 15px; font-size: 0.9rem;">
                            <i class="fas fa-sync-alt"></i> Generate New Routine
                        </button>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; grid-template-columns: auto 1fr; gap: 15px; margin-bottom: 20px;">
                            <div style="font-weight: 600;">Mon/Wed/Fri:</div>
                            <div>Sciatica-safe weight lifting (Upper/Lower/Full-body)</div>
                            
                            <div style="font-weight: 600;">Tue/Thu:</div>
                            <div>Bike commute + core stability exercises</div>
                            
                            <div style="font-weight: 600;">Sat/Sun:</div>
                            <div>Pilates/Yoga + optional recumbent bike</div>
                        </div>
                        
                        <h4>Sciatica-Safe Modifications</h4>
                        <ul class="checklist">
                            <li><i class="fas fa-ban" style="color: var(--danger);"></i> Avoid bent-over moves</li>
                            <li><i class="fas fa-exchange-alt" style="color: var(--success);"></i> Deadlifts → Glute bridges</li>
                            <li><i class="fas fa-exchange-alt" style="color: var(--success);"></i> Squats → Wall slides</li>
                            <li><i class="fas fa-check-circle" style="color: var(--success);"></i> Focus on core: Bird-dog, dead bug, planks</li>
                        </ul>
                        
                        <div style="margin-top: 20px; background-color: #fffbeb; padding: 15px; border-radius: 10px;">
                            <h4><i class="fas fa-bicycle"></i> Recumbent Bike Protocol</h4>
                            <p>On sciatica flare days (>5/10 pain):</p>
                            <ul style="padding-left: 20px; margin-top: 10px;">
                                <li>Swap commute for Uber</li>
                                <li>Add 20-min recumbent bike session</li>
                                <li>Low resistance, focus on gentle motion</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-running"></i> Core Stability Routine
                    </div>
                    <div class="card-body">
                        <h4>Daily Exercises (15 minutes)</h4>
                        <ul class="checklist">
                            <li><i class="fas fa-check-circle" style="color: var(--success);"></i> Bird-dog: 3 sets of 10 seconds hold each side</li>
                            <li><i class="fas fa-check-circle" style="color: var(--success);"></i> Dead bug: 3 sets of 12 reps</li>
                            <li><i class="fas fa-check-circle" style="color: var(--success);"></i> Plank: 3 sets of 30 seconds</li>
                            <li><i class="fas fa-check-circle" style="color: var(--success);"></i> Pelvic tilts: 2 sets of 15 reps</li>
                        </ul>
                        
                        <div style="margin-top: 25px;">
                            <h4>Pain Management Protocol</h4>
                            <div style="display: grid; grid-template-columns: auto 1fr; gap: 10px; margin-top: 10px;">
                                <div style="font-weight: 600;">Pain Level 1-3:</div>
                                <div>Proceed with planned workout + extra stretching</div>
                                
                                <div style="font-weight: 600;">Pain Level 4-5:</div>
                                <div>Switch to recumbent bike + yoga only</div>
                                
                                <div style="font-weight: 600;">Pain Level 6+:</div>
                                <div>Rest day + consult physiotherapist</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Recovery Section -->
        <section id="recovery" class="section">
            <div class="section-header">
                <h2>Recovery & Well-Being</h2>
                <p>Strategies for physical and mental restoration</p>
            </div>
            
            <div class="card-grid">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-wind"></i> Breathing Protocol
                    </div>
                    <div class="card-body">
                        <h4>John Meneghini Method</h4>
                        <p>Daily 20-minute session at 7:30 PM with these steps:</p>
                        <ol style="padding-left: 20px; margin: 15px 0;">
                            <li>Find a quiet, comfortable seated position</li>
                            <li>Inhale deeply through nose for 4 seconds</li>
                            <li>Hold breath for 7 seconds</li>
                            <li>Exhale completely through mouth for 8 seconds</li>
                            <li>Repeat cycle for 20 minutes</li>
                        </ol>
                        
                        <h4>Stealth Breathing Breaks</h4>
                        <p>2-3 minute breaks during work hours:</p>
                        <ul style="padding-left: 20px; margin-top: 10px;">
                            <li>10:30 AM, 2:30 PM, and as needed</li>
                            <li>3 cycles of 4-7-8 breathing</li>
                            <li>Focus on posture and diaphragm movement</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-bed"></i> Sleep Optimization
                    </div>
                    <div class="card-body">
                        <h4>Sleep Routine (9:00-9:30 PM)</h4>
                        <ul class="checklist">
                            <li><i class="fas fa-check-circle" style="color: var(--success);"></i> No screens after 8:30 PM</li>
                            <li><i class="fas fa-check-circle" style="color: var(--success);"></i> Dim lights throughout home</li>
                            <li><i class="fas fa-check-circle" style="color: var(--success);"></i> Room temperature at 18°C (64°F)</li>
                            <li><i class="fas fa-check-circle" style="color: var(--success);"></i> Blackout curtains + white noise</li>
                            <li><i class="fas fa-check-circle" style="color: var(--success);"></i> Optional melatonin (0.5mg) as needed</li>
                        </ul>
                        
                        <div style="margin-top: 25px;">
                            <h4>Supplement Schedule</h4>
                            <div class="supplement-grid">
                                <div class="supplement-card">
                                    <div class="supplement-name">
                                        <i class="fas fa-capsules"></i>
                                        <h4>Vitamin D</h4>
                                    </div>
                                    <p>2000 IU with breakfast</p>
                                </div>
                                <div class="supplement-card">
                                    <div class="supplement-name">
                                        <i class="fas fa-capsules"></i>
                                        <h4>B12</h4>
                                    </div>
                                    <p>1000mcg with breakfast</p>
                                </div>
                                <div class="supplement-card">
                                    <div class="supplement-name">
                                        <i class="fas fa-capsules"></i>
                                        <h4>Magnesium</h4>
                                    </div>
                                    <p>200mg at bedtime</p>
                                </div>
                                <div class="supplement-card">
                                    <div class="supplement-name">
                                        <i class="fas fa-capsules"></i>
                                        <h4>Omega-3</h4>
                                    </div>
                                    <p>1200mg with dinner</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Career Section -->
        <section id="career" class="section">
            <div class="section-header">
                <h2>Career Development</h2>
                <p>Roadmap to Google Global IT Manager position</p>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-briefcase"></i> Certification Timeline
                </div>
                <div class="card-body">
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <div class="timeline-title">Months 1-2</div>
                                <p>Google Cloud Digital Leader Certification</p>
                                <p><strong>Weekly:</strong> 5 study sessions, 3 practice exams</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <div class="timeline-title">Months 3-8</div>
                                <p>Associate Cloud Engineer Certification</p>
                                <p><strong>Weekly:</strong> 7 study sessions, hands-on labs</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <div class="timeline-title">Months 9-12</div>
                                <p>Professional Cloud Architect Certification</p>
                                <p><strong>Weekly:</strong> Case studies, mock interviews</p>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; background-color: #f0f9ff; padding: 20px; border-radius: 10px;">
                        <h4><i class="fas fa-tasks"></i> Weekly Career Actions</h4>
                        <ul class="checklist">
                            <li><input type="checkbox" id="career1"><label for="career1">3 GCP study sessions (7:45 AM, 12:15 PM, 8 PM)</label></li>
                            <li><input type="checkbox" id="career2"><label for="career2">Update LinkedIn with new skills</label></li>
                            <li><input type="checkbox" id="career3"><label for="career3">Monthly resume refresh</label></li>
                            <li><input type="checkbox" id="career4"><label for="career4">2 mock interviews per month</label></li>
                            <li><input type="checkbox" id="career5"><label for="career5">Leadership training (Sat AM)</label></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Family Section -->
        <section id="family" class="section">
            <div class="section-header">
                <h2>Family & Couple Time</h2>
                <p>Quality connections with loved ones</p>
            </div>
            
            <div class="family-grid">
                <div class="family-card">
                    <i class="fas fa-hands-helping"></i>
                    <h3>Post-Dinner Activities</h3>
                    <p>5x/week simple activities after dinner</p>
                    <ul style="text-align: left; margin-top: 15px; padding-left: 20px;">
                        <li>Family walks (20 min)</li>
                        <li>Board games (30 min)</li>
                        <li>Mini yoga session</li>
                        <li>Quick card games</li>
                    </ul>
                </div>
                
                <div class="family-card">
                    <i class="fas fa-heart"></i>
                    <h3>Couple Time</h3>
                    <p>Weekly connection rituals</p>
                    <ul style="text-align: left; margin-top: 15px; padding-left: 20px;">
                        <li>Friday night movie</li>
                        <li>Saturday breakfast talk</li>
                        <li>Sunday planning session</li>
                        <li>Daily check-in during commute</li>
                    </ul>
                </div>
                
                <div class="family-card">
                    <i class="fas fa-calendar-check"></i>
                    <h3>Weekend Planning</h3>
                    <p>Balanced family activities</p>
                    <ul style="text-align: left; margin-top: 15px; padding-left: 20px;">
                        <li>One educational outing</li>
                        <li>One physical activity</li>
                        <li>One creative project</li>
                        <li>One relaxation period</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <!-- Tracking Section -->
        <section id="tracking" class="section">
            <div class="section-header">
                <h2>Tracking & Review</h2>
                <p>Systems for accountability and progress measurement</p>
            </div>
            
            <div class="tracking-grid">
                    <div class="tracking-card">
                    <div class="tracking-card-header">
                        <i class="fas fa-clipboard-list"></i>
                        <h3>Daily Progress</h3>
                    </div>
                    <div class="date-selector">
                        <button id="prevDate" class="date-nav-btn"><i class="fas fa-chevron-left"></i></button>
                        <span id="currentDate">July 24, 2025</span>
                        <button id="nextDate" class="date-nav-btn"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    <ul class="checklist" id="dailyChecklist">
                        <li>
                            <input type="checkbox" id="track1" data-activity="morning_routine">
                            <label for="track1">Morning routine completed</label>
                            <span class="completion-time"></span>
                        </li>
                        <li>
                            <input type="checkbox" id="track2" data-activity="workout">
                            <label for="track2">Workout completed</label>
                            <span class="completion-time"></span>
                        </li>
                        <li>
                            <input type="checkbox" id="track3" data-activity="water_goal">
                            <label for="track3">Water goal (4L)</label>
                            <div class="progress-mini">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="progress-value">0/4L</span>
                            </div>
                        </li>
                        <li>
                            <input type="checkbox" id="track4" data-activity="supplements">
                            <label for="track4">Supplements taken</label>
                            <span class="completion-time"></span>
                        </li>
                        <li>
                            <input type="checkbox" id="track5" data-activity="breathing">
                            <label for="track5">Breathing practice</label>
                            <span class="completion-time"></span>
                        </li>
                        <li>
                            <input type="checkbox" id="track6" data-activity="family">
                            <label for="track6">Family activity</label>
                            <span class="completion-time"></span>
                        </li>
                    </ul>
                    <div class="stats-summary">
                        <div class="stat-item">
                            <span class="stat-label">Current Streak</span>
                            <span class="stat-value" id="currentStreak">0 days</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Completion Rate</span>
                            <span class="stat-value" id="completionRate">0%</span>
                        </div>
                    </div>
                </div>                <div class="tracking-card">
                    <div class="tracking-card-header">
                        <i class="fas fa-sync-alt"></i>
                        <h3>Weekly Review</h3>
                    </div>
                    <p>Sundays at 4 PM - 60 minute session:</p>
                    <ul style="padding-left: 20px; margin: 15px 0;">
                        <li>Review checklist completion</li>
                        <li>Assess sciatica pain levels</li>
                        <li>Plan meals for upcoming week</li>
                        <li>Schedule key activities</li>
                        <li>Career progress assessment</li>
                    </ul>
                </div>
                
                <div class="tracking-card">
                    <div class="tracking-card-header">
                        <i class="fas fa-calendar-alt"></i>
                        <h3>Calendar Integration</h3>
                    </div>
                    
                    <!-- Calendar Preview -->
                    <div class="calendar-preview" id="calendarPreview">
    <div class="calendar-nav">
        <button class="calendar-nav-btn prev-month" aria-label="Previous month">
            <i class="fas fa-chevron-left"></i>
        </button>
        <h3 class="current-month">July 2025</h3>
        <button class="calendar-nav-btn next-month" aria-label="Next month">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>
    <div class="calendar-grid">
        <div class="calendar-days">
            <span>Sun</span>
            <span>Mon</span>
            <span>Tue</span>
            <span>Wed</span>
            <span>Thu</span>
            <span>Fri</span>
            <span>Sat</span>
        </div>
        <div class="calendar-dates"></div>
    </div>
</div>

                    <!-- Calendar Integration Options -->
                    <div class="calendar-actions">
                        <h4>Google Calendar Integration</h4>
                        <div id="googleAuthSection">
                            <!-- This section will show either the sign-in button or the user's email if authenticated -->
                        </div>
                        <div class="calendar-sync-options">
                            <button id="googleCalendarSync" class="sync-button google" disabled>
                                <i class="fab fa-google"></i> Sync with Google Calendar
                            </button>
                            <button id="downloadICS" class="sync-button ics">
                                <i class="fas fa-download"></i> Download .ICS File
                            </button>
                        </div>
                        
                        <!-- Google Calendar Settings -->
                        <div id="googleCalendarSettings" style="display: none;">
                            <h4>Calendar Settings</h4>
                            <div class="form-group">
                                <label for="calendarSelect">Select Calendar:</label>
                                <select id="calendarSelect" class="form-control">
                                    <option value="primary">Primary Calendar</option>
                                </select>
                            </div>
                        </div>

                        <!-- Sync Settings -->
                        <div class="sync-settings">
                            <h4>Sync Settings</h4>
                            <div class="settings-grid">
                                <label class="setting-item">
                                    <input type="checkbox" id="syncWorkouts" checked>
                                    <span>Workouts & Exercise</span>
                                </label>
                                <label class="setting-item">
                                    <input type="checkbox" id="syncMeals" checked>
                                    <span>Meal Times</span>
                                </label>
                                <label class="setting-item">
                                    <input type="checkbox" id="syncFamily" checked>
                                    <span>Family Activities</span>
                                </label>
                                <label class="setting-item">
                                    <input type="checkbox" id="syncStudy" checked>
                                    <span>Study Sessions</span>
                                </label>
                            </div>
                        </div>

                        <!-- Last Sync Status -->
                        <div class="sync-status">
                            <i class="fas fa-sync-alt"></i>
                            <span>Last synced: <span id="lastSyncTime">Never</span></span>
                        </div>
                    </div>
                </div>

                <style>
                    .calendar-nav {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-bottom: 1rem;
                    }

                    .calendar-nav-btn {
                        background: none;
                        border: none;
                        cursor: pointer;
                        padding: 0.5rem;
                        border-radius: 0.25rem;
                        color: var(--primary);
                        transition: all var(--transition-normal);
                    }

                    .calendar-nav-btn:hover {
                        background-color: var(--light-gray);
                    }

                    .calendar-nav-btn:focus-visible {
                        outline: var(--focus-ring-width) solid var(--focus-ring-color);
                        outline-offset: 0.125rem;
                    }

                    .current-month {
                        font-size: var(--text-lg);
                        font-weight: 600;
                        color: var(--dark);
                    }

                    .calendar-grid {
                        display: flex;
                        flex-direction: column;
                        gap: 0.5rem;
                    }

                    .calendar-days {
                        display: grid;
                        grid-template-columns: repeat(7, 1fr);
                        text-align: center;
                        font-weight: 600;
                        color: var(--gray);
                        font-size: var(--text-sm);
                    }

                    .calendar-dates {
                        display: grid;
                        grid-template-columns: repeat(7, 1fr);
                        gap: 0.25rem;
                    }

                    .calendar-date {
                        aspect-ratio: 1;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        cursor: pointer;
                        border-radius: 0.25rem;
                        font-size: var(--text-sm);
                        transition: all var(--transition-normal);
                    }

                    .calendar-date:hover {
                        background-color: var(--light-gray);
                    }

                    .calendar-date.active {
                        background-color: var(--primary);
                        color: white;
                    }

                    .calendar-date.today {
                        border: 0.125rem solid var(--primary);
                    }

                    .calendar-date.other-month {
                        color: var(--gray);
                        opacity: 0.5;
                    }
                </style>
            </div>
            
            <div class="quote-container" id="weeklyQuote">
                <div class="quote"></div>
                <div class="author"></div>
                <div class="quote-refresh">
                    <span class="quote-week">Week of <span id="quoteWeek"></span></span>
                    <button id="refreshQuote" class="quote-refresh-btn" aria-label="Get new quote">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Style for quote refresh button -->
        <style>
            .quote-refresh {
                margin-top: 1rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
                font-size: 0.9rem;
                color: var(--gray);
            }

            .quote-week {
                font-style: italic;
            }

            .quote-refresh-btn {
                background: none;
                border: none;
                color: var(--primary);
                cursor: pointer;
                padding: 0.5rem;
                border-radius: 50%;
                transition: all 0.3s ease;
                width: 32px;
                height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .quote-refresh-btn:hover {
                background-color: rgba(37, 99, 235, 0.1);
                transform: rotate(180deg);
            }

            .quote-refresh-btn i {
                font-size: 1rem;
            }

            @keyframes fadeInQuote {
                0% {
                    opacity: 0;
                    transform: translateY(10px);
                }
                100% {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        </style>
        
        <!-- Action Bar -->
        <div class="action-bar">
            <button id="exportPdfBtn" class="cta-button" aria-label="Export plan to PDF">
                <i class="fas fa-file-pdf"></i> Export to PDF
            </button>
            <button id="addCalendarBtn" class="cta-button" aria-label="Add plan to calendar">
                <i class="fas fa-calendar-alt"></i> Add to Calendar
            </button>
            <button id="printPlanBtn" class="cta-button" aria-label="Print current plan">
                <i class="fas fa-print"></i> Print Plan
            </button>
            <button id="updateProgressBtn" class="cta-button" aria-label="Update progress tracking">
                <i class="fas fa-sync-alt"></i> Update Progress
            </button>
        </div>

        <!-- Progress Update Modal -->
        <div id="progressModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <h2>Update Progress</h2>
                <div class="progress-form">
                    <div class="form-group">
                        <label for="waterIntake">Water Intake (L):</label>
                        <input type="number" id="waterIntake" min="0" max="6" step="0.1" value="2.5">
                    </div>
                    <div class="form-group">
                        <label for="exerciseComplete">Exercise Completed:</label>
                        <select id="exerciseComplete">
                            <option value="full">Full Workout</option>
                            <option value="partial">Partial Workout</option>
                            <option value="none">Not Completed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="painLevel">Pain Level (1-10):</label>
                        <input type="range" id="painLevel" min="1" max="10" value="3">
                        <span id="painLevelValue">3</span>
                    </div>
                    <button id="saveProgressBtn" class="cta-button">Save Progress</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Add print-specific styles -->
    <style>
        @media print {
            .no-print, .action-bar, .modal {
                display: none !important;
            }
            body {
                background: white;
                color: black;
            }
            .card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
            }
            .section {
                page-break-after: always;
            }
            .progress-fill {
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            max-width: 500px;
            width: 90%;
            position: relative;
        }

        .close-modal {
            position: absolute;
            right: 1rem;
            top: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--dark);
            font-weight: 600;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid var(--light-gray);
            color: var(--dark);
            font-weight: 600;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            font-size: 1rem;
        }

        .form-group input[type="range"] {
            width: calc(100% - 40px);
            display: inline-block;
        }

        #painLevelValue {
            display: inline-block;
            width: 30px;
            text-align: right;
            margin-left: 10px;
        }
    </style>

    <script>
        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop - 100,
                        behavior: 'smooth'
                    });
                    
                    // Update active nav link
                    document.querySelectorAll('.nav-links a').forEach(link => {
                        link.classList.remove('active');
                    });
                    this.classList.add('active');
                }
            });
        });
        
        // Update active nav link based on scroll position
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section');
            let currentSection = '';
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 120;
                if (scrollY >= sectionTop) {
                    currentSection = section.getAttribute('id');
               
                }
            });
            
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').substring(1) === currentSection) {
                    link.classList.add('active');
                }
            });
        });
        
        // Checklist functionality
        document.querySelectorAll('.checklist input[type="checkbox"]').forEach(checkbox => {
            // Set random checked status for demo
            checkbox.checked = Math.random() > 0.5;
            updateChecklistStyle(checkbox);
            
            checkbox.addEventListener('change', function() {
                updateChecklistStyle(this);
            });
        });
        
        function updateChecklistStyle(checkbox) {
            const label = checkbox.nextElementSibling;
            if (checkbox.checked) {
                label.style.textDecoration = 'line-through';
                label.style.opacity = '0.7';
            } else {
                label.style.textDecoration = 'none';
                label.style.opacity = '1';
            }
        }
        
        // Load html2pdf library
        const html2pdfScript = document.createElement('script');
        html2pdfScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js';
        document.head.appendChild(html2pdfScript);

        // Action button functionality
        document.addEventListener('DOMContentLoaded', () => {
            // Export to PDF
            document.getElementById('exportPdfBtn').addEventListener('click', async () => {
                try {
                    const element = document.querySelector('main');
                    const options = {
                        margin: 10,
                        filename: 'master-life-plan.pdf',
                        image: { type: 'jpeg', quality: 0.98 },
                        html2canvas: { scale: 2 },
                        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
                    };
                    await html2pdf().set(options).from(element).save();
                } catch (error) {
                    console.error('PDF generation failed:', error);
                    alert('Failed to generate PDF. Please try again.');
                }
            });

            // Add to Calendar
            document.getElementById('addCalendarBtn').addEventListener('click', () => {
                const calendarData = {
                    title: 'Master Life Plan - Daily Schedule',
                    description: 'Daily routine and activities from Master Life Plan',
                    start: new Date().setHours(5, 30, 0), // 5:30 AM
                    end: new Date().setHours(21, 30, 0),  // 9:30 PM
                    recurrence: 'FREQ=DAILY'
                };

                // Generate .ics file content
                const icsContent = generateICSFile(calendarData);
                
                // Create and trigger download
                const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
                const link = document.createElement('a');
                link.href = window.URL.createObjectURL(blob);
                link.download = 'master-life-plan.ics';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });

            // Print Plan
            document.getElementById('printPlanBtn').addEventListener('click', () => {
                window.print();
            });

            // Update Progress
            const progressModal = document.getElementById('progressModal');
            const closeModal = document.querySelector('.close-modal');
            const painLevel = document.getElementById('painLevel');
            const painLevelValue = document.getElementById('painLevelValue');

            document.getElementById('updateProgressBtn').addEventListener('click', () => {
                progressModal.style.display = 'flex';
            });

            closeModal.addEventListener('click', () => {
                progressModal.style.display = 'none';
            });

            window.addEventListener('click', (e) => {
                if (e.target === progressModal) {
                    progressModal.style.display = 'none';
                }
            });

            painLevel.addEventListener('input', (e) => {
                painLevelValue.textContent = e.target.value;
            });

            document.getElementById('saveProgressBtn').addEventListener('click', async () => {
                const progress = {
                    date: new Date().toISOString(),
                    waterIntake: parseFloat(document.getElementById('waterIntake').value),
                    exerciseComplete: document.getElementById('exerciseComplete').value,
                    painLevel: parseInt(document.getElementById('painLevel').value)
                };

                try {
                    // Mock API call - replace with actual endpoint
                    await saveProgress(progress);
                    
                    // Update UI elements
                    updateProgressDisplay(progress);
                    
                    progressModal.style.display = 'none';
                    alert('Progress updated successfully!');
                } catch (error) {
                    console.error('Failed to save progress:', error);
                    alert('Failed to save progress. Please try again.');
                }
            });
        });

        // Helper Functions
        function generateICSFile(data) {
            const now = new Date();
            const stamp = now.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
            
            return `BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
DTSTART:${formatDateForICS(data.start)}
DTEND:${formatDateForICS(data.end)}
RRULE:${data.recurrence}
DTSTAMP:${stamp}
SUMMARY:${data.title}
DESCRIPTION:${data.description}
END:VEVENT
END:VCALENDAR`;
        }

        function formatDateForICS(date) {
            return new Date(date)
                .toISOString()
                .replace(/[-:]/g, '')
                .split('.')[0] + 'Z';
        }

        // Progress Tracking System
        class ProgressTracker {
            constructor() {
                this.currentDate = new Date();
                this.initializeEventListeners();
                this.loadProgress();
            }

            initializeEventListeners() {
                document.getElementById('prevDate').addEventListener('click', () => this.changeDate(-1));
                document.getElementById('nextDate').addEventListener('click', () => this.changeDate(1));
                
                document.getElementById('dailyChecklist').addEventListener('change', (e) => {
                    if (e.target.type === 'checkbox') {
                        this.updateActivity(e.target);
                    }
                });
            }

            changeDate(offset) {
                this.currentDate.setDate(this.currentDate.getDate() + offset);
                document.getElementById('currentDate').textContent = this.formatDate(this.currentDate);
                this.loadProgress();
            }

            formatDate(date) {
                return new Intl.DateTimeFormat('en-US', { 
                    month: 'long',
                    day: 'numeric',
                    year: 'numeric'
                }).format(date);
            }

            async loadProgress() {
                const dateKey = this.currentDate.toISOString().split('T')[0];
                const savedProgress = JSON.parse(localStorage.getItem(`progress_${dateKey}`)) || {
                    activities: {},
                    waterIntake: 0,
                    painLevel: 0
                };

                this.updateDisplay(savedProgress);
                this.updateStats();
            }

            async saveProgress(progress) {
                const dateKey = this.currentDate.toISOString().split('T')[0];
                const currentProgress = JSON.parse(localStorage.getItem(`progress_${dateKey}`)) || {
                    activities: {},
                    waterIntake: 0,
                    painLevel: 0
                };

                const updatedProgress = {
                    ...currentProgress,
                    ...progress,
                    lastUpdated: new Date().toISOString()
                };

                localStorage.setItem(`progress_${dateKey}`, JSON.stringify(updatedProgress));
                this.updateDisplay(updatedProgress);
                this.updateStats();
            }

            updateActivity(checkbox) {
                const activity = checkbox.dataset.activity;
                const isChecked = checkbox.checked;
                const timestamp = new Date().toLocaleTimeString();

                this.saveProgress({
                    activities: {
                        [activity]: {
                            completed: isChecked,
                            completionTime: isChecked ? timestamp : null
                        }
                    }
                });
            }

            updateDisplay(progress) {
                // Update checkboxes and completion times
                document.querySelectorAll('#dailyChecklist input[type="checkbox"]').forEach(checkbox => {
                    const activity = checkbox.dataset.activity;
                    const activityData = progress.activities[activity];
                    
                    checkbox.checked = activityData?.completed || false;
                    
                    const timeSpan = checkbox.parentElement.querySelector('.completion-time');
                    if (timeSpan) {
                        timeSpan.textContent = activityData?.completionTime || '';
                    }
                });

                // Update water intake
                const waterProgress = document.querySelector('#track3 .progress-fill');
                const waterValue = document.querySelector('#track3 .progress-value');
                if (waterProgress && waterValue) {
                    const percentage = (progress.waterIntake / 4) * 100;
                    waterProgress.style.width = `${percentage}%`;
                    waterValue.textContent = `${progress.waterIntake}/4L`;
                }
            }

            updateStats() {
                // Calculate streak
                let streak = 0;
                let currentDate = new Date();
                
                while (true) {
                    const dateKey = currentDate.toISOString().split('T')[0];
                    const dayProgress = JSON.parse(localStorage.getItem(`progress_${dateKey}`));
                    
                    if (!dayProgress || !this.isDayCompleted(dayProgress)) break;
                    
                    streak++;
                    currentDate.setDate(currentDate.getDate() - 1);
                }

                document.getElementById('currentStreak').textContent = `${streak} days`;

                // Calculate completion rate
                const totalDays = Object.keys(localStorage)
                    .filter(key => key.startsWith('progress_')).length;
                const completedDays = Object.keys(localStorage)
                    .filter(key => key.startsWith('progress_'))
                    .filter(key => this.isDayCompleted(JSON.parse(localStorage.getItem(key))))
                    .length;

                const completionRate = totalDays ? Math.round((completedDays / totalDays) * 100) : 0;
                document.getElementById('completionRate').textContent = `${completionRate}%`;
            }

            isDayCompleted(progress) {
                if (!progress || !progress.activities) return false;
                
                const requiredActivities = ['morning_routine', 'workout', 'water_goal', 
                                         'supplements', 'breathing', 'family'];
                return requiredActivities.every(activity => 
                    progress.activities[activity]?.completed);
            }
        }

        // Quote Management System
        class QuoteManager {
            constructor() {
                this.quotes = [
                    {
                        text: "Discipline is choosing between what you want now and what you want most.",
                        author: "Abraham Lincoln"
                    },
                    {
                        text: "The only way to do great work is to love what you do.",
                        author: "Steve Jobs"
                    },
                    {
                        text: "Success is not final, failure is not fatal: it is the courage to continue that counts.",
                        author: "Winston Churchill"
                    },
                    {
                        text: "The future depends on what you do today.",
                        author: "Mahatma Gandhi"
                    },
                    {
                        text: "Your health is an investment, not an expense.",
                        author: "Unknown"
                    },
                    {
                        text: "The body achieves what the mind believes.",
                        author: "Jim Evans"
                    },
                    {
                        text: "Small daily improvements are the key to staggering long-term results.",
                        author: "Unknown"
                    },
                    {
                        text: "Balance is not something you find, it's something you create.",
                        author: "Jana Kingsford"
                    },
                    {
                        text: "Take care of your body. It's the only place you have to live.",
                        author: "Jim Rohn"
                    },
                    {
                        text: "The difference between try and triumph is just a little umph!",
                        author: "Marvin Phillips"
                    }
                ];

                this.quoteContainer = document.getElementById('weeklyQuote');
                this.quoteText = this.quoteContainer.querySelector('.quote');
                this.quoteAuthor = this.quoteContainer.querySelector('.author');
                this.quoteWeek = document.getElementById('quoteWeek');
                this.refreshBtn = document.getElementById('refreshQuote');

                this.initializeQuoteSystem();
            }

            initializeQuoteSystem() {
                this.refreshBtn.addEventListener('click', () => this.setNewQuote(true));
                this.loadOrUpdateQuote();
            }

            getWeekNumber() {
                const now = new Date();
                const startOfYear = new Date(now.getFullYear(), 0, 1);
                const days = Math.floor((now - startOfYear) / (24 * 60 * 60 * 1000));
                return Math.ceil(days / 7);
            }

            formatWeekDate() {
                const now = new Date();
                const startOfWeek = new Date(now);
                startOfWeek.setDate(now.getDate() - now.getDay());
                
                return startOfWeek.toLocaleDateString('en-US', {
                    month: 'long',
                    day: 'numeric',
                    year: 'numeric'
                });
            }

            getRandomQuote() {
                const index = Math.floor(Math.random() * this.quotes.length);
                return this.quotes[index];
            }

            loadOrUpdateQuote() {
                const currentWeek = this.getWeekNumber();
                const savedQuote = JSON.parse(localStorage.getItem('weeklyQuote'));

                if (!savedQuote || savedQuote.week !== currentWeek) {
                    this.setNewQuote();
                } else {
                    this.displayQuote(savedQuote.quote);
                    this.quoteWeek.textContent = savedQuote.weekDate;
                }
            }

            setNewQuote(manual = false) {
                const quote = this.getRandomQuote();
                const currentWeek = this.getWeekNumber();
                const weekDate = this.formatWeekDate();

                const quoteData = {
                    quote,
                    week: currentWeek,
                    weekDate,
                    lastUpdated: new Date().toISOString()
                };

                localStorage.setItem('weeklyQuote', JSON.stringify(quoteData));
                this.displayQuote(quote);
                this.quoteWeek.textContent = weekDate;

                if (manual) {
                    // Add animation class for refresh
                    this.quoteContainer.style.animation = 'fadeInQuote 0.5s ease-in-out';
                    setTimeout(() => {
                        this.quoteContainer.style.animation = '';
                    }, 500);
                }
            }

            displayQuote(quote) {
                this.quoteText.textContent = `"${quote.text}"`;
                this.quoteAuthor.textContent = `- ${quote.author}`;
            }
        }

        // Calendar Integration System
        // Load Google API Client Library
        const googleScript = document.createElement('script');
        googleScript.src = 'https://apis.google.com/js/api.js';
        document.head.appendChild(googleScript);

        class CalendarManager {
            constructor() {
                this.initializeElements();
                if (this.elementsExist) {
                    this.currentDate = new Date();
                    this.selectedDate = new Date();
                    this.setupEventListeners();
                    this.render();
                }
            }

            initializeElements() {
                try {
                    // Find elements within the tracking-grid
                    const trackingGrid = document.querySelector('.tracking-grid');
                    this.prevButton = trackingGrid?.querySelector('.prev-month');
                    this.nextButton = trackingGrid?.querySelector('.next-month');
                    this.monthDisplay = trackingGrid?.querySelector('.current-month');
                    this.datesGrid = trackingGrid?.querySelector('.calendar-dates');
                    this.syncButton = document.getElementById('syncCalendar');

                    this.elementsExist = !!(
                        this.prevButton &&
                        this.nextButton &&
                        this.monthDisplay &&
                        this.datesGrid
                    );
                    
                    if (!this.elementsExist) {
                        console.warn('Calendar elements not found. Check HTML structure.');
                    }
                } catch (error) {
                    console.error('Error initializing calendar elements:', error);
                    this.elementsExist = false;
                }
            }

            setupEventListeners() {
                if (!this.elementsExist) return;

                this.prevButton.addEventListener('click', () => this.changeMonth(-1));
                this.nextButton.addEventListener('click', () => this.changeMonth(1));
                
                if (this.syncButton) {
                    this.syncButton.addEventListener('click', () => this.syncWithGoogleCalendar());
                }
            }

            changeMonth(delta) {
                this.currentDate.setMonth(this.currentDate.getMonth() + delta);
                this.render();
            }

            render() {
                if (!this.elementsExist) return;

                const year = this.currentDate.getFullYear();
                const month = this.currentDate.getMonth();

                // Update month display
                this.monthDisplay.textContent = new Intl.DateTimeFormat('en-US', {
                    month: 'long',
                    year: 'numeric'
                }).format(this.currentDate);

                // Clear existing dates
                this.datesGrid.innerHTML = '';

                // Get first day of month and total days
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const startDay = firstDay.getDay();
                const totalDays = lastDay.getDate();

                // Add previous month's days
                const prevMonthDays = new Date(year, month, 0).getDate();
                for (let i = startDay - 1; i >= 0; i--) {
                    const dateDiv = document.createElement('div');
                    dateDiv.className = 'calendar-date other-month';
                    dateDiv.textContent = prevMonthDays - i;
                    this.datesGrid.appendChild(dateDiv);
                }

                // Add current month's days
                const today = new Date();
                for (let day = 1; day <= totalDays; day++) {
                    const dateDiv = document.createElement('div');
                    dateDiv.className = 'calendar-date';
                    dateDiv.textContent = day;

                    if (
                        day === today.getDate() &&
                        month === today.getMonth() &&
                        year === today.getFullYear()
                    ) {
                        dateDiv.classList.add('today');
                    }

                    if (
                        day === this.selectedDate.getDate() &&
                        month === this.selectedDate.getMonth() &&
                        year === this.selectedDate.getFullYear()
                    ) {
                        dateDiv.classList.add('active');
                    }

                    dateDiv.addEventListener('click', () => this.selectDate(new Date(year, month, day)));
                    this.datesGrid.appendChild(dateDiv);
                }

                // Add next month's days
                const remainingCells = 42 - (startDay + totalDays);
                for (let day = 1; day <= remainingCells; day++) {
                    const dateDiv = document.createElement('div');
                    dateDiv.className = 'calendar-date other-month';
                    dateDiv.textContent = day;
                    this.datesGrid.appendChild(dateDiv);
                }
            }

            selectDate(date) {
                this.selectedDate = date;
                this.render();
                // Dispatch event on the actual calendar element
                this.datesGrid.closest('.tracking-grid').dispatchEvent(new CustomEvent('dateSelected', { detail: date }));
                
                // Update visual selection
                const dateElements = this.datesGrid.querySelectorAll('.calendar-date');
                dateElements.forEach(el => el.classList.remove('active'));
                
                // Find and highlight the selected date
                const selectedEl = Array.from(dateElements).find(el => 
                    parseInt(el.textContent) === date.getDate() && 
                    !el.classList.contains('other-month')
                );
                if (selectedEl) selectedEl.classList.add('active');
            }

            async syncWithGoogleCalendar() {
                try {
                    console.log('Syncing with Google Calendar...');
                    // Implement Google Calendar sync logic here
                } catch (error) {
                    console.error('Error syncing with Google Calendar:', error);
                }
            }
        }

        // Initialize quote manager
        const quoteManager = new QuoteManager();

        // Initialize progress tracker
        const progressTracker = new ProgressTracker();

        // Initialize calendar manager
        const calendarManager = new CalendarManager();

        async function saveProgress(progress) {
            await progressTracker.saveProgress({
                waterIntake: progress.waterIntake,
                painLevel: progress.painLevel,
                activities: {
                    workout: {
                        completed: progress.exerciseComplete === 'full',
                        completionTime: new Date().toLocaleTimeString()
                    }
                }
            });
        }

        function updateProgressDisplay(progress) {
            progressTracker.loadProgress();
        }

        async function generateWorkout() {
            const prompt = `Generate a personalized workout routine for a 44-year-old male IT Manager with sciatica. Consider:
            - Low-impact exercises
            - Core strengthening
            - Sciatica-safe modifications
            - 45-minute duration
            - Equipment available: recumbent bike, resistance bands, light dumbbells
            Please format the response with clear sections for warm-up, main workout, and cool-down.`;

            try {
                const response = await fetch('AIzaSyDt8C5DDP9PQO1v7KijZ4MhMFMFpquFBmg', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ prompt })
                });

                if (!response.ok) throw new Error('Failed to generate workout');
                
                const data = await response.json();
                // Update the workout section with the generated routine
                const workoutSection = document.querySelector('#exercise .card-body');
                // Format and display the response
                workoutSection.innerHTML = formatWorkoutResponse(data.response);
            } catch (error) {
                console.error('Error generating workout:', error);
                alert('Failed to generate workout routine. Please try again.');
            }
        }

        async function generateMealPlan() {
            const prompt = `Generate a personalized meal plan and shopping list for a 44-year-old male IT Manager following:
            - Low-FODMAP diet
            - Low-carb preferences
            - Family-friendly options
            - 17/7 intermittent fasting schedule
            - Consider wife's iron needs and kids' preferences
            Please include:
            1. Daily meal plan
            2. Shopping list organized by category
            3. Meal prep suggestions`;

            try {
                const response = await fetch('AIzaSyDt8C5DDP9PQO1v7KijZ4MhMFMFpquFBmg', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ prompt })
                });

                if (!response.ok) throw new Error('Failed to generate meal plan');
                
                const data = await response.json();
                // Update the meal plan section with the generated content
                const mealSection = document.querySelector('#nutrition .meal-plan');
                // Format and display the response
                mealSection.innerHTML = formatMealPlanResponse(data.response);
            } catch (error) {
                console.error('Error generating meal plan:', error);
                alert('Failed to generate meal plan. Please try again.');
            }
        }

        function formatWorkoutResponse(response) {
            // Format the workout response into HTML
            // You can customize this based on the actual response structure
            return response;
        }

        function formatMealPlanResponse(response) {
            // Format the meal plan response into HTML
            // You can customize this based on the actual response structure
            return response;
        }
    </script>
</body>
</html>
